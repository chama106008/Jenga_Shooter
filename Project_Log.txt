1/22
修正day2、本日より記録開始。

目標は以下3点。
①「FPS」っぽさの拡充
・リロード機能実装
・3-5アウト制に変更。1発アウトは辛い。
・射撃体験の多様化（射撃のパラメータが変化するアイテム設置、標的オブジェクトの多様化など）
②ゲーム体験の拡充（「敵を撃って倒す」代わりになる、面白おかしい体験を追加する）
・世界観の変更➡おもちゃっぽい環境の中で、特大のジェンガで爆発が巻き起こる。
・演出の追加：爆発するたびにカメラを若干揺らす、ゲームオーバー時には特大の爆発+視点を変えて、過剰なレベルで演出する。
③「作成用のツール」の勉強
・レベル作成ツールの構築：ツールとして確立するというよりは、現状のものを簡便にして大雑把にマップを作るシステムを考える。現在検討しているのは、レベルの構成要素を①中央のジェンガ、②レベル全体のサイズ感（S/M/L）、③4辺×3段の足場、④4隅、という形でざっくり分割して、それぞれに使える要素の組み合わせを保管、レベル構築時にはこれを組み合わせて、指定の座標に指定のセットを召喚する形で実装。レベルを「スロット」に分けて、それぞれを構築していく。

1/21で残弾数+リロードの機能面を実装、リロード処理をUIに反映させる点に苦戦。
1/22、リロード処理のUI反映に成功。修正点は以下。
・プログレスバーの表示設定（visibility）の切り替えポイントを整理、リロード前後で切り替えるように変更
・パーセントを0-100で考えていたが、0-1が標準なので、こちらに調整
・UI配置は、render transformが変な数値になっていたので修正、各アイテムを整列させたうえで座標を指定して重ねた

以上でリロード機能実装は完了。
反省点としては、武器コンポーネントに弾数カウント/リロード処理➡GameModeの関数呼び出し➡GameModeが作ったUIウィジェットの処理を実行、とやや複雑になって、恐らく不要なコードがいくらか残ってしまった。
UI反映に関しては、よくよく考えると個別のウィジェットとしてプログレスバーを配置して管理しても良かったかもしれない。関与するクラスの数は変わらないが、区別しやすくて多少処理を検討しやすい。

明日以降は、演出面をできる範囲で調整予定。
無料の素材をライブラリに追加。炎&爆発、子ども部屋っぽい空間、爆弾など。爆弾はC4が良かったが、無料はダイナマイトと手榴弾のみ。


〈day 3〉
メチャクチャ期間空いた。unityの方の開発&ラボ事情が混雑してた。
ライブラリ確認→子供部屋はunity素材で使用できず、その他でよさげなものもあるが、用法不明なのでいったん保留。
先に、手元でできる部分で、①FPSっぽさの拡充 + ②演出面の追加を実施。
目標は、残機付与からの①残機減少時のダメージっぽい演出、②ゲームオーバー時の演出強化。
一先ず、ゲームモード側に残機の関数を配置、落下判定側の処理を即ゲームオーバーからLoseLifeに差し替え。
PlayUI上にプログレスバーを新設して、残機数管理。初期1.0で、都度毎再計算。追加で数字表記も入れたが、初期値が固定になってしまう。
やや修正が面倒（というか、後のバグが怖い）ので、一先ず初期値5/5として保留。
残機減少時に赤色に点灯する演出を実装。UMG アニメーションのタブが見つからなかったが、ウィンドウから発見して解決。
Opacityを切り替えているはずなのに全然反映されず難儀したが、borderコンテントの中に複数の「Opacity」が存在していて、間違ったものを切り替えていたのが原因。Brush ColorのOpacityを切り替えたところで解決。0.5秒ほどのやや長めの演出で、多少印象付ける形に。

ここまで、ざっくり1.5hr。

次の追加想定としては、
①落下時にブロック消滅
②得点時にカメラ揺れ演出
③終了時に、俯瞰気味のカメラに移行して、中心座標から爆発する演出

ここまで出来たら、一度世界観は保留にして、ステージ設計の簡略化を試みる。


〈day 4〉
カメラ演出切り替えから
→playeyCameraのrotationを細かく切り替えるモーションを導入することになるかと思ったけど、標準でCameraManagerに干渉するカメラ制御用のノードがもとからあった。Blue Print classでこれまた標準の「CameraShakeBase」を使って、ある程度強度強めで時間短めに設定して導入。
シェイクはさせられるが、右下のライフルがついてこずに荒ぶるのがやや難点。一先ずはそのままで保留。
シェイク演出の関数は、判定エリア側の関数に付属。
ついでに、すぐにできる部分で落下時のブロック消滅も実装。落下時の処理にDestroyを噛ませるだけ。
ゲームオーバー演出実装に移行。新規のカメラアクターを設置して、gameover処理の後ろにカメラクラスの探索→発見したアクタへの移行（with blend）で滑らかに移動。カメラ配置は座標指定で、ステージ設計の際に組み込む必要あり。例外処理自体は配置しているので、組み込み忘れたら何も起きない。
爆発処理は、Radial Force Componentを付与した透明アクタを作成、所定座標にスポーンしたら自動で発火するように設定。
Gameover処理の後ろに、2秒ほど置いてからスポーン処理を追加。delayは関数中では使えないので、カスタムイベントを設定して実装。
impulseの範囲と強度はかなり高め。割と大きく跳ねるので、可能なら背景を設定しなおして、もう少し俯瞰視点で見れるようにした方が綺麗。

〈day 5〉
風邪がヤバいのでほどほどに。
演出面の強化。ゲームオーバー直後、カメラ切り替えと併せて赤色の警告っぽい点灯を実装。ライトを追加したところ、ライト自体はできたが「視界に綺麗に反映」させることが出来ず、反射基盤が必要だったため断念、残機減少時のUIエフェクトを転用して実装、少しだけ立ち上がりはやめ、消失遅めで緩急をつけて、長さ的に演出時間は3秒まで延長。
ゲームオーバー時の演出に、音源を追加して、ついでにブロック落下時の音ははじけるような煩いエフェクトを省いて、警告っぽいビープ音に変更。爆発音を爆破アクタの直後に呼び出したらやや遅めだったので、爆破アクタの爆破処理に0.03秒ディレイを加えて対応。
炎のエフェクトを追加予定だったが、インストールした素材がイマイチだったため、爆破パーティクルを大きめにして実装。
追加で、現行の4レベル全てについて、ゲームオーバー演出用のカメラと中心プラットフォームのプレイヤー遮断用のフィールドを実装。
続けて、レベルメイカーの実装を開始。
BPのアクタとして、LevelAssemblerを作成。スポーンさせるアクタのクラスリストと、対応するトランスフォームのリストを配列として作成して、それぞれに登録した上で、Beginに合わせて全てのアクタをスポーンさせる方針で処理。
一先ず、簡易テストとして落下判定エリアのスポーンに成功。
あとは、各種パーツを使える形に落とし込めばOK。